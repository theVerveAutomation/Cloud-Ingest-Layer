# MediaMTX Configuration - v1.15.6 Production Optimized

# General
logLevel: info

# API - Moved to 9997 to avoid conflict with HLS
api: yes
apiAddress: :9997

# RTSP - Internal routing for analytics [cite: 59, 120]
rtsp: yes
rtspAddress: :8554
# Use updated key to resolve WAR message
rtspTransports: [tcp, udp]

# RTMP - Ingestion from legacy edge devices [cite: 32, 102]
rtmp: yes
rtmpAddress: :1935

# HLS - Web Playback (defaults to 8888) [cite: 34]
hls: yes
hlsAddress: :8888

# WebRTC - SaaS/Low Latency Playback [cite: 31, 98]
webrtc: yes
webrtcAddress: :8889
# Use updated key to resolve WAR message
webrtcICEServers2: 
  - url: stun:stun.l.google.com:19302

webrtcAdditionalHosts: ["127.0.0.1"]


# Stream Configuration [cite: 88, 121]
# paths:
#   cam1:
#     source: rtsp://172.20.0.3:8554/cam1  # Replace with go2rtc IP/Hostname
#   cam2:
#     source: rtsp://172.20.0.3:8554/cam2
#   cam3:
#     source: rtsp://172.20.0.3:8554/cam3
paths:
  # Template for all streams pushed to /live/...
  live:
    # Authenticate the Edge Device (The Pusher)
    # publishUser: edge_agent
    # publishPass: "SuperSecretEdgePassword"
    
    # Optional: Turn off HLS/WebRTC if not needed to save CPU
    runOnDemand: "no"